<div class="settings">
  <div class="settings-header">
    <h1>
      <lib-icon name="settings"></lib-icon>
      Settings
    </h1>
    <p>Manage your application preferences and configurations.</p>
  </div>

  <div class="settings-container">
    <lib-card class="settings-sidebar">
      <nav class="settings-nav">
        <lib-button 
          variant="ghost"
          class="nav-item"
          [class.active]="activeTab === 'general'"
          (clicked)="setActiveTab('general')"
        >
          <lib-icon name="tune"></lib-icon>
          General
        </lib-button>
        <lib-button 
          variant="ghost"
          class="nav-item"
          [class.active]="activeTab === 'notifications'"
          (clicked)="setActiveTab('notifications')"
        >
          <lib-icon name="notifications"></lib-icon>
          Notifications
        </lib-button>
        <lib-button 
          variant="ghost"
          class="nav-item"
          [class.active]="activeTab === 'security'"
          (clicked)="setActiveTab('security')"
        >
          <lib-icon name="security"></lib-icon>
          Security
        </lib-button>
        <lib-button 
          variant="ghost"
          class="nav-item"
          [class.active]="activeTab === 'integrations'"
          (clicked)="setActiveTab('integrations')"
        >
          <lib-icon name="extension"></lib-icon>
          Integrations
        </lib-button>
        <lib-button 
          variant="ghost"
          class="nav-item"
          [class.active]="activeTab === 'account'"
          (clicked)="setActiveTab('account')"
        >
          <lib-icon name="account_circle"></lib-icon>
          Account
        </lib-button>
      </nav>
    </lib-card>

    <lib-card class="settings-content">
      <!-- General Settings -->
      <div class="settings-panel" *ngIf="activeTab === 'general'">
        <h2>General Settings</h2>
        <div class="settings-group">
          <lib-form-field label="Site Name" appearance="outline">
            <lib-text-field [ngModel]="generalSettings.siteName"></lib-text-field>
          </lib-form-field>
          
          <lib-form-field label="Site Description" appearance="outline">
            <lib-text-field [ngModel]="generalSettings.siteDescription" type="textarea"></lib-text-field>
          </lib-form-field>
          
          <div class="form-row">
            <lib-form-field label="Language" appearance="outline">
              <lib-dropdown [ngModel]="generalSettings.language">
                <option value="en">English</option>
                <option value="es">Spanish</option>
                <option value="fr">French</option>
              </lib-dropdown>
            </lib-form-field>
            
            <lib-form-field label="Timezone" appearance="outline">
              <lib-dropdown [ngModel]="generalSettings.timezone">
                <option value="UTC">UTC</option>
                <option value="EST">Eastern</option>
                <option value="PST">Pacific</option>
              </lib-dropdown>
            </lib-form-field>
          </div>
        </div>
      </div>

      <!-- Notification Settings -->
      <div class="settings-panel" *ngIf="activeTab === 'notifications'">
        <h2>Notification Settings</h2>
        <div class="settings-group">
          <div class="toggle-field" *ngFor="let setting of notificationSettingsArray">
            <div class="toggle-content">
              <div class="toggle-info">
                <h4>{{ setting.label }}</h4>
                <p>{{ setting.desc }}</p>
              </div>
              <lib-switch 
                [ngModel]="notificationSettings[setting.key]"
                (valueChange)="toggleNotification(setting.key)"
              ></lib-switch>
            </div>
          </div>
        </div>
      </div>

      <!-- Security Settings -->
      <div class="settings-panel" *ngIf="activeTab === 'security'">
        <h2>Security Settings</h2>
        <div class="settings-group">
          <div class="toggle-field">
            <div class="toggle-content">
              <div class="toggle-info">
                <h4>Two-Factor Authentication</h4>
                <p>Add an extra layer of security to your account</p>
              </div>
              <lib-switch 
                [ngModel]="securitySettings.twoFactorAuth"
                (valueChange)="toggleSecurity('twoFactorAuth')"
              ></lib-switch>
            </div>
          </div>
          
          <lib-form-field label="Session Timeout (minutes)" appearance="outline">
            <lib-text-field type="number" [ngModel]="securitySettings.sessionTimeout"></lib-text-field>
          </lib-form-field>
          
          <lib-form-field label="Password Expiry (days)" appearance="outline">
            <lib-text-field type="number" [ngModel]="securitySettings.passwordExpiry"></lib-text-field>
          </lib-form-field>
          
          <lib-form-field label="Max Login Attempts" appearance="outline">
            <lib-text-field type="number" [ngModel]="securitySettings.loginAttempts"></lib-text-field>
          </lib-form-field>
        </div>
      </div>

      <!-- Integrations -->
      <div class="settings-panel" *ngIf="activeTab === 'integrations'">
        <h2>Integrations</h2>
        <div class="settings-group">
          <div class="integration-item" *ngFor="let integration of integrations">
            <div class="integration-info">
              <h4>{{ integration.name }}</h4>
              <p>{{ integration.description }}</p>
            </div>
            <div class="integration-status">
              <lib-badge 
                [variant]="integration.connected ? 'solid' : 'outline'"
                [color]="integration.connected ? 'success' : 'danger'"
                class="status-badge"
              >
                <lib-icon [name]="integration.connected ? 'check_circle' : 'cancel'" slot="icon-left"></lib-icon>
                {{ integration.connected ? 'Connected' : 'Disconnected' }}
              </lib-badge>
              <lib-button 
                [variant]="integration.connected ? 'danger' : 'primary'"
                (clicked)="toggleIntegration(integration)"
              >
                {{ integration.connected ? 'Disconnect' : 'Connect' }}
              </lib-button>
            </div>
          </div>
        </div>
      </div>

      <!-- Account Settings -->
      <div class="settings-panel" *ngIf="activeTab === 'account'">
        <h2>Account Settings</h2>
        <div class="settings-group">
          <lib-form-field label="Full Name" appearance="outline">
            <lib-text-field value="John Doe"></lib-text-field>
          </lib-form-field>
          
          <lib-form-field label="Email Address" appearance="outline">
            <lib-text-field type="email" value="john.doe@company.com"></lib-text-field>
          </lib-form-field>
          
          <lib-form-field label="Current Password" appearance="outline">
            <lib-text-field type="password" placeholder="Enter current password"></lib-text-field>
          </lib-form-field>
          
          <lib-form-field label="New Password" appearance="outline">
            <lib-text-field type="password" placeholder="Enter new password"></lib-text-field>
          </lib-form-field>
          
          <div class="danger-zone">
            <h3>
              <lib-icon name="warning" color="#ef4444"></lib-icon>
              Danger Zone
            </h3>
            <p>Once you delete your account, there is no going back.</p>
            <lib-button variant="danger">Delete Account</lib-button>
          </div>
        </div>
      </div>

      <div class="settings-actions">
        <lib-button variant="primary">Save Changes</lib-button>
        <lib-button variant="ghost">Cancel</lib-button>
      </div>
    </lib-card>
  </div>
</div>